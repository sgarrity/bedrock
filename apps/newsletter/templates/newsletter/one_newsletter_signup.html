{% extends 'base-resp.html' %}
{#
 Base template for pages used to signup for one particular newsletter.

 Inheriting templates should put their body content in the newsletter_content block.

 They must also set the newsletter_title and newsletter_id variables.

 Finally, they can fill in the blocks 'success_en' and 'success_non_en' with
 the page body to display to English and to non-English users after they
 subscribe.  The default text here can be used as an example, but is probably
 not exactly right for newsletters other than the Mozilla & You newsletter.
#}

{% block email_form %}{% endblock %}{# Don't need another signup form on the page. #}

{% block body_id %}newsletter{% endblock %}

{% from "macros.html" import email_newsletter_form with context %}

{% block site_css %}
  {{ super() }}
  {{ css('newsletter') }}
{% endblock %}

{% block content %}
  <div id="doc">
    {% if request.newsletter_success %}
      {# User has been subscribed #}
      <div id="email-form" class="thank billboard">
        <h3>{{ _('Thank you for signing up!') }}</h3>
          {% if request.locale.startswith('en') %}
            {% block success_en %}
              {# This text is only used for English users, so no need to translate #}
              <p>
                We look forward to sharing tips & tricks on getting the most out
                of Firefox, as well as exciting news about Mozilla and how weâ€™re
                working to create a better Web.
              </p>
              <p>
                Please add our sending address:
                <a href="mailto:mozilla@e.mozilla.org">mozilla@e.mozilla.org</a>
                to your address book to ensure we
                always reach your inbox.
              </p>
            {% endblock success_en %}
          {% else %}
            {% block success_non_en %}
              {% trans email='mozilla@e.mozilla.org' %}
                <p>Thanks! Please check your inbox to confirm your subscription.</p>
                <p>
                  You'll receive an email from
                  <a href="mailto:{{ email }}">{{ email }}</a>
                  to confirm your subscription. If
                  you don't see it, check your spam filter. You must confirm your
                  subscription to receive our newsletter.
                </p>
              {% endtrans %}
            {% endblock success_non_en %}
          {% endif %}
      </div>
    {% else %}
      {% block newsletter_content %}{% endblock newsletter_content %}
      {{ email_newsletter_form(newsletter_id=newsletter_id,title=newsletter_title,footer=False) }}
    {% endif %}
  </div><!-- doc -->
{% endblock content %}
